<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¥í•´ë“±ê¸‰ ì˜ˆì¸¡ ê²°ê³¼ - SANZERO</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; line-height: 1.6; color: #333; background: #f8fafc; }

        /* í—¤ë” */
        .header { background: #2563eb; color: white; padding: 1rem 0; }
        .header .container { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: bold; }
        .user-info { color: #e0e7ff; }

        /* ì»¨í…Œì´ë„ˆ */
        .container { max-width: 800px; margin: 0 auto; padding: 0 20px; }

        /* ë©”ì¸ ì»¨í…ì¸  */
        .main { padding: 40px 0; }
        .back-link { color: #2563eb; text-decoration: none; margin-bottom: 20px; display: inline-block; }
        .back-link:hover { text-decoration: underline; }

        /* ê²°ê³¼ ì»¨í…Œì´ë„ˆ */
        .result-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 40px;
            color: white;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .result-title { font-size: 2rem; margin-bottom: 30px; }

        /* ë“±ê¸‰ í‘œì‹œ */
        .grade-display {
            font-size: 4rem;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .grade-1-3 { color: #ff6b6b; text-shadow: 0 0 20px rgba(255, 107, 107, 0.8); }
        .grade-4-7 { color: #ffa726; text-shadow: 0 0 20px rgba(255, 167, 38, 0.8); }
        .grade-8-12 { color: #66bb6a; text-shadow: 0 0 20px rgba(102, 187, 106, 0.8); }
        .grade-13-15 { color: #42a5f5; text-shadow: 0 0 20px rgba(66, 165, 245, 0.8); }

        .result-message { font-size: 1.3rem; margin-bottom: 25px; opacity: 0.95; }

        /* ì‹ ë¢°ë„ ë°” */
        .confidence-section { margin: 25px 0; }
        .confidence-label { font-size: 1.1rem; margin-bottom: 10px; }
        .confidence-bar {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
            margin: 10px 0;
        }
        .confidence-fill {
            background: linear-gradient(45deg, #4caf50, #8bc34a);
            height: 100%;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: bold;
            color: white;
            transition: width 1s ease;
        }

        /* ì†ŒìŠ¤ ë°°ì§€ */
        .source-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin: 15px 0;
        }

        /* ë“±ê¸‰ ìŠ¤ì¼€ì¼ */
        .grade-scale-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
        }
        .grade-scale {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .scale-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 0.7;
            transition: all 0.3s;
        }
        .scale-item.current {
            opacity: 1;
            transform: scale(1.2);
        }
        .scale-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-bottom: 8px;
        }
        .scale-text { font-size: 0.85rem; text-align: center; }

        /* ìƒì„¸ ì •ë³´ ì¹´ë“œ */
        .details-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .detail-item {
            background: #f8f9ff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
        }

        .detail-item h4 {
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .detail-item p {
            color: #718096;
            line-height: 1.5;
        }

        /* ì•¡ì…˜ ë²„íŠ¼ */
        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 30px 0;
        }

        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary { background: linear-gradient(45deg, #667eea, #764ba2); color: white; }
        .btn-secondary { background: white; color: #667eea; border: 2px solid #667eea; }
        .btn-success { background: linear-gradient(45deg, #4caf50, #66bb6a); color: white; }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        /* ì£¼ì˜ì‚¬í•­ */
        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 12px;
            padding: 20px;
            margin: 30px 0;
        }

        .warning-box h4 {
            color: #856404;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .warning-box p {
            color: #856404;
            line-height: 1.6;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .result-container { padding: 30px 20px; }
            .grade-display { font-size: 3rem; }
            .details-grid { grid-template-columns: 1fr; gap: 15px; }
            .actions { flex-direction: column; align-items: center; }
            .btn { width: 100%; max-width: 280px; justify-content: center; }
            .grade-scale { justify-content: space-around; }
        }
    </style>
</head>
<body>
    <!-- í—¤ë” -->
    <header class="header">
        <div class="container">
            <div class="logo">ğŸ¯ SANZERO</div>
            <div class="user-info">testuser</div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="main">
        <div class="container">
            <!-- ë’¤ë¡œ ê°€ê¸° -->
            <a href="/" class="back-link">â† ë©”ì¸ ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°</a>

            <!-- ê²°ê³¼ ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
            <div class="result-container">
                <h1 class="result-title">ğŸ¯ ì¥í•´ë“±ê¸‰ ì˜ˆì¸¡ ê²°ê³¼</h1>

                <div id="resultDisplay">
                    <!-- ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>

                <div id="sourceBadge" class="source-badge" style="display: none;">
                    <span id="sourceIcon">ğŸ”</span>
                    <span id="sourceText">ì˜ˆì¸¡ ë°©ë²•</span>
                </div>

                <!-- ì‹ ë¢°ë„ í‘œì‹œ -->
                <div id="confidenceSection" class="confidence-section" style="display: none;">
                    <div class="confidence-label">ì˜ˆì¸¡ ì‹ ë¢°ë„</div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" id="confidenceFill" style="width: 0%;">
                            <span id="confidenceText">0%</span>
                        </div>
                    </div>
                </div>

                <!-- ë“±ê¸‰ ì •ë³´ -->
                <div class="grade-scale-container" id="gradeInfo" style="display: none;">
                    <h3 style="margin-bottom: 15px;">ì¥í•´ë“±ê¸‰ ë¶„ë¥˜</h3>
                    <div class="grade-scale">
                        <div class="scale-item" data-grade-range="1-3">
                            <div class="scale-dot" style="background: #ff6b6b;"></div>
                            <div class="scale-text">1-3ê¸‰<br>ì¤‘ì¦</div>
                        </div>
                        <div class="scale-item" data-grade-range="4-7">
                            <div class="scale-dot" style="background: #ffa726;"></div>
                            <div class="scale-text">4-7ê¸‰<br>ì¤‘ë“±ë„</div>
                        </div>
                        <div class="scale-item" data-grade-range="8-12">
                            <div class="scale-dot" style="background: #66bb6a;"></div>
                            <div class="scale-text">8-12ê¸‰<br>ê²½ë„</div>
                        </div>
                        <div class="scale-item" data-grade-range="13-15">
                            <div class="scale-dot" style="background: #42a5f5;"></div>
                            <div class="scale-text">13-15ê¸‰<br>ê²½ë¯¸</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ê²°ê³¼ ìƒì„¸ ì •ë³´ -->
            <div class="details-card">
                <h2 style="text-align: center; margin-bottom: 25px;">ğŸ“‹ ì˜ˆì¸¡ ìƒì„¸ ì •ë³´</h2>

                <div class="details-grid">
                    <div class="detail-item">
                        <h4>ğŸ¯ ì˜ˆì¸¡ ë“±ê¸‰</h4>
                        <p id="gradeDetail">ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                    </div>

                    <div class="detail-item">
                        <h4>ğŸ” ì˜ˆì¸¡ ë°©ë²•</h4>
                        <p id="methodDetail">ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                    </div>

                    <div class="detail-item">
                        <h4>ğŸ“Š ì‹ ë¢°ë„</h4>
                        <p id="confidenceDetail">ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                    </div>

                    <div class="detail-item">
                        <h4>ğŸ“ ì˜ˆì¸¡ ê·¼ê±°</h4>
                        <p id="explanationDetail">ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                    </div>
                </div>
            </div>

            <!-- ì£¼ì˜ì‚¬í•­ -->
            <div class="warning-box">
                <h4>âš ï¸ ì¤‘ìš”í•œ ì£¼ì˜ì‚¬í•­</h4>
                <p>
                    ì´ ì˜ˆì¸¡ ê²°ê³¼ëŠ” AI ë¶„ì„ì„ í†µí•œ <strong>ì°¸ê³ ìš© ì •ë³´</strong>ì…ë‹ˆë‹¤.
                    ì‹¤ì œ ì¥í•´ë“±ê¸‰ì€ ì˜ë£Œì§„ì˜ ì •ë°€ ì§„ë‹¨ê³¼ ì‚°ì¬ë³´í—˜ ì‹¬ì‚¬ìœ„ì›íšŒì˜ ì¢…í•©ì ì¸ ê²€í† ë¥¼ í†µí•´ ê²°ì •ë©ë‹ˆë‹¤.
                    ì •í™•í•œ ì§„ë‹¨ê³¼ ë“±ê¸‰ ê²°ì •ì„ ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ ì˜ë£Œì§„ê³¼ ìƒë‹´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
                </p>
            </div>

            <!-- ë‹¤ìŒ ë‹¨ê³„ ì•ˆë‚´ -->
            <div class="actions">
                <a href="/compensation/calculator" class="btn btn-primary">
                    ğŸ’° ë³´ìƒê¸ˆ ê³„ì‚°í•˜ê¸°
                </a>
                <a href="/analysis/disability" class="btn btn-secondary">
                    ğŸ”„ ë‹¤ì‹œ ì˜ˆì¸¡í•˜ê¸°
                </a>
            </div>
        </div>
    </main>

    <script>
        // URL íŒŒë¼ë¯¸í„°ì—ì„œ ê²°ê³¼ ë°ì´í„° ì¶”ì¶œ
        const urlParams = new URLSearchParams(window.location.search);
        const grade = urlParams.get('grade');
        const confidence = urlParams.get('confidence');
        const source = urlParams.get('source');
        const message = decodeURIComponent(urlParams.get('message') || '');

        function displayResult() {
            const resultDisplay = document.getElementById('resultDisplay');
            const sourceBadge = document.getElementById('sourceBadge');
            const confidenceSection = document.getElementById('confidenceSection');
            const gradeInfo = document.getElementById('gradeInfo');

            if (grade && grade !== 'N/A') {
                // ë“±ê¸‰ë³„ ìŠ¤íƒ€ì¼ í´ë˜ìŠ¤ ê²°ì •
                let gradeClass = '';
                const gradeNum = parseInt(grade);
                if (gradeNum <= 3) gradeClass = 'grade-1-3';
                else if (gradeNum <= 7) gradeClass = 'grade-4-7';
                else if (gradeNum <= 12) gradeClass = 'grade-8-12';
                else gradeClass = 'grade-13-15';

                // ê²°ê³¼ í‘œì‹œ
                resultDisplay.innerHTML = `
                    <div class="grade-display ${gradeClass}">${grade}ê¸‰</div>
                    <div class="result-message">${message || `ì¥í•´ë“±ê¸‰ ${grade}ê¸‰ìœ¼ë¡œ ì˜ˆì¸¡ë©ë‹ˆë‹¤`}</div>
                `;

                // ì†ŒìŠ¤ ë°°ì§€ í‘œì‹œ
                if (source) {
                    const sourceIcon = getSourceIcon(source);
                    const sourceText = getSourceText(source);
                    document.getElementById('sourceIcon').textContent = sourceIcon;
                    document.getElementById('sourceText').textContent = sourceText;
                    sourceBadge.style.display = 'inline-flex';
                }

                // ì‹ ë¢°ë„ í‘œì‹œ
                if (confidence) {
                    const confidencePercent = Math.round(parseFloat(confidence) * 100);
                    document.getElementById('confidenceText').textContent = `${confidencePercent}%`;
                    document.getElementById('confidenceFill').style.width = `${confidencePercent}%`;
                    confidenceSection.style.display = 'block';
                }

                // ë“±ê¸‰ ìŠ¤ì¼€ì¼ì—ì„œ í˜„ì¬ ìœ„ì¹˜ í‘œì‹œ
                const scaleItems = document.querySelectorAll('.scale-item');
                scaleItems.forEach(item => {
                    const range = item.dataset.gradeRange;
                    if (isGradeInRange(gradeNum, range)) {
                        item.classList.add('current');
                    }
                });

                gradeInfo.style.display = 'block';

                // ìƒì„¸ ì •ë³´ ì—…ë°ì´íŠ¸
                updateDetailCards(grade, source, confidence, message);

            } else {
                // ì˜¤ë¥˜ í‘œì‹œ
                resultDisplay.innerHTML = `
                    <div style="font-size: 2rem; color: #ff6b6b; margin-bottom: 20px;">âŒ ì˜ˆì¸¡ ì‹¤íŒ¨</div>
                    <div class="result-message">${message || 'ì˜ˆì¸¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤'}</div>
                `;
            }
        }

        function getSourceIcon(source) {
            const icons = {
                'exact_match': 'ğŸ¯',
                'similarity_match': 'ğŸ”',
                'regression_model': 'ğŸ¤–',
                'fallback': 'âš™ï¸',
                'error': 'âŒ'
            };
            return icons[source] || 'ğŸ”';
        }

        function getSourceText(source) {
            const texts = {
                'exact_match': 'ì •í™• ë¬¸êµ¬ ë§¤ì¹­',
                'similarity_match': 'BERT ìœ ì‚¬ë„ ë§¤ì¹­',
                'regression_model': '2-Stage ë¨¸ì‹ ëŸ¬ë‹',
                'fallback': 'ê·œì¹™ ê¸°ë°˜ ì˜ˆì¸¡',
                'error': 'ì˜ˆì¸¡ ì˜¤ë¥˜'
            };
            return texts[source] || 'ì•Œ ìˆ˜ ì—†ìŒ';
        }

        function isGradeInRange(grade, range) {
            const [min, max] = range.split('-').map(n => parseInt(n));
            return grade >= min && grade <= max;
        }

        function updateDetailCards(grade, source, confidence, message) {
            document.getElementById('gradeDetail').textContent =
                grade ? `${grade}ê¸‰ (${getGradeDescription(parseInt(grade))})` : 'ì˜ˆì¸¡ ì‹¤íŒ¨';

            document.getElementById('methodDetail').textContent =
                source ? getSourceText(source) : 'ì•Œ ìˆ˜ ì—†ìŒ';

            const confidencePercent = confidence ? Math.round(parseFloat(confidence) * 100) : 0;
            document.getElementById('confidenceDetail').textContent =
                `${confidencePercent}% (${getConfidenceDescription(confidencePercent)})`;

            document.getElementById('explanationDetail').textContent =
                message || 'ì˜ˆì¸¡ ê·¼ê±° ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.';
        }

        function getGradeDescription(grade) {
            if (grade <= 3) return 'ì¤‘ì¦ ì¥ì• ';
            if (grade <= 7) return 'ì¤‘ë“±ë„ ì¥ì• ';
            if (grade <= 12) return 'ê²½ë„ ì¥ì• ';
            return 'ê²½ë¯¸í•œ ì¥ì• ';
        }

        function getConfidenceDescription(confidence) {
            if (confidence >= 90) return 'ë§¤ìš° ë†’ìŒ';
            if (confidence >= 70) return 'ë†’ìŒ';
            if (confidence >= 50) return 'ë³´í†µ';
            if (confidence >= 30) return 'ë‚®ìŒ';
            return 'ë§¤ìš° ë‚®ìŒ';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê²°ê³¼ í‘œì‹œ
        document.addEventListener('DOMContentLoaded', displayResult);
    </script>
</body>
</html>